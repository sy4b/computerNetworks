物理层考虑在连接各台计算机的传输媒体上传输**数据比特流**（不指具体的传输媒体）

# 2.1 通信基础
## 2.1.1 基本概念
### 1. 数据、信号和码元
- 模拟数据：连续变化
- 数字数据：取值有限的几个离散数值
- 码元：用一个固定时长的信号波形表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位。1码元可以携带若干bit信息

### 2. 信源、信道、信宿
- 信源：信息发送端
- 信宿：信息接收端
- 信道：信号的传输媒介，不等同于电路。可分为模拟信道、数字信道、无线信道、有线信道

信道上传输的信号分为基带信号（数字信号1和0直接用不同电压表示）、宽带信号（基带信号进行调制）

根据通信双方交互方式，可以分为

1. 单向通信
2. 半双工通信：通信双方都可以发送、接受消息，但同一时刻不能双方同时发送和接受消息
3. 全双工通信：通信双方可以同时发送和接受消息

### 3. 速率、波特和带宽
速率：数据传输速率，单位时间传输的数据量，可以用码元传输速率和信息传输速率表示

- 码元传输速率（波特率）：单位时间传输码元个数
- 信息传输速率（比特率）：单位时间传输比特数量

> 波特率 = 比特率 / 1码元比特数

- 带宽：单位时间网络中最高数据率，单位b/s

## 2.1.2 奈奎斯特定律和香农定理
### 1. 奈奎斯特定律
- 码间串扰：具体信道所能通过的频率范围有限，信号中的高频分量不能通过信道，导致接收端波形失去码元之间的清晰界限

奈奎斯特定律：理想低通信道（没有噪声、带宽有限），为了避免码间串扰，**码元极限传输速率$2W$波特**，$W$为信道带宽。$V$表示每个码元离散电平的数目（多少种码元），则：

极限**数据传输速率** = $2Wlog_2(V) b/s$

### 2. 香农定理
在带宽受限制，且有高斯白噪声干扰的信道中，不产生误差的极限传输速率

极限数据传输速率 = $Wlog_2(1+S/N)$

$W$为信道带宽，$S$为信号平均功率，$N$为高斯白噪声功率，信噪比 = $10log_{10}(S/N)(dB)$

## 2.1.3 编码与调制
- 调制：数据变成模拟信号
- 编码：数据变成数字信号

### 1. 数字数据编码为数字信号
**数字数据编码用于基带传输**，即不改变数据信号频率，直接传输数字信号

![在这里插入图片描述](https://img-blog.csdnimg.cn/4b3cb0a7c9254260a8f8910bed4d0eb0.jpeg)
1. 归零编码（RZ）：高电平表示1，低电平表示0（或者相反），每个时钟周期中间跳变到0。提供了自同步机制
2. 非归零编码（NRZ）：与RZ的区别在于不用归零
3. 反向非归零编码（NRZI）：用信号反转表示0，信号不变表示1
4. **曼彻斯特编码：将一个码元分成两个相等间隔，前高后低表示0，反之表示1（也可以相反）。波特率 = 比特率*2（两个码元对应一个比特，频带宽度是原始的两倍**。（**以太网使用的编码方式就是曼彻斯特编码**
5. 差分曼彻斯特编码：前半个码元电平和上一个码元后半个电平相同表示1，反之表示0
6. 4B/5B编码，4位数据一组，按照规则转化为相应的5位码，16种冗余作为它用

### 2. 数字数据调制为模拟信号
1. 幅移键控ASK：用幅度表示0、1
2. 频移键控FSK：频率
3. 相移键控PSK：相位
4. 正交振幅调制QAM：结合ASK和PSK，假设波特率$B$，采用$m$相位$n$振幅，那么数据传输速率$R=Blog_2(mn)$

![在这里插入图片描述](https://img-blog.csdnimg.cn/a4d3615d3e2c4da29cbd91871910d81e.jpeg)
### 3. 模拟数据编码为数字信号
典型例子：**对音频信号进行编码的脉冲调制PCM**，包括三个步骤：采样、量化、编码

**采样定理/奈奎斯特定理：原始信号最大频率$f$，采样频率必须大于等于$2f$才能保证采样后的数字信号不失真**

### 4. 模拟数据调制为模拟信号
可以使用频分复用FDM，充分利用带宽

电话机和本地局交换机采用该方法

## 2.1.4 电路交换、报文交换、分组交换
### 1. 电路交换
**进行数据传输之前，两个节点必须建立一条专用的物理通信路径**，该路径在整个数据传输期间一直被独占，直到通信结束才被释放

数据传输过程中，用户始终占用端到端的固定传输宽带

电路交换在交换节点数据采用**直通**的方式

优点：

1. 通信时延小
2. 有序传输
3. 没有冲突
4. 适用范围广：适合模拟信号、数字信号传输
5. 实时性强：物理通路一旦建立，双方可以随时通信
6. 控制简单

缺点：

1. 建立连接时间长
2. 线路独占，使用效率低
3. 灵活性差：一旦通路中某点出现故障，就必须重新建立新的连接
4. 难以规格化

### 2. 报文交换
报文携带目标地址、源地址等信息，报文交换在交换节点采用**存储转发**的传输方式

优点：

1. 无需建立连接：用户可以随时发送报文
2. 动态分配线路
3. 提高线路可靠性：如果线路故障，可以重新选择一条线路
4. 提高线路利用率：通信双方不是独占物理通道
5. 提供多目标服务：一个报文可以同时发送给多个目的地址，这在电路交换中很难实现

缺点：

1. 数据在交换节点需要存储、转发，引入转发时延
2. 报文交换对报文大小没有限制，要求网络节点有较大的存储空间

### 3. 分组交换
1. **分组交换采用存储转发方式**
2. 分组交换限制每次传送的数据块的大小上限。数据块划分为合理的大小，加上一些必要的控制信息构成分组

优点

1. 无需建立连接
2. 线路利用率高
3. 简化了存储管理（相对于报文交换
4. 加速传输
5. 减少了出错概率和重发数据量

缺点

1. 存在传输时延
2. 需要传输额外的信息量（每个小数据块都要加上控制信息
3. 分组交换采用数据报服务时，可能出现失序、丢失、重复

![在这里插入图片描述](https://img-blog.csdnimg.cn/5fd7cb6d209f4c199499a813b6977b5f.jpeg)
## 2.1.5 数据报和虚电路
数据报方式和虚电路方式是分组交换的两种方式，由网络层提供

### 1. 数据报
传输一个报文时，先将报文拆分成若干带有序号的数据单元，在网络层加上地址等控制信息形成数据报分组

1. 发送分组前不需要建立连接
2. **无连接不可靠的服务**
3. 发送分组中包括发送端和接收端的完整地址，以便独立传输
4. 网络具有冗余路径，某条链路出现故障时，可以选择其他路径
5. 吞吐量提高
6. 不独占链路，资源利用率高

### 2. 虚电路
通信过程分别为三个阶段：虚电路建立、数据传输、虚电路释放

1. 发送前**需要建立逻辑上相连的虚电路**。一旦建立，就固定了虚电路的物理路径
2. 建立虚电路时，分配一个未用过的虚电路号，以区分其他虚电路

特点

1. 引入了建立虚电路和拆除的时间开销
2. 路由选择体现在连接建立的阶段，建立连接后，就确定了传输路径
3. 虚电路**提供可靠的通信功能**，**可以进行流量控制**
4. **目的地地址只在建立连接时使用，之后使用虚电路号**
5. 缺点：某个节点或链路出现故障彻底失效时，所有经过该节点或链路的虚电路都被破坏

![在这里插入图片描述](https://img-blog.csdnimg.cn/6a2e75b4e4c94afd922c3a6bac163c99.jpeg)
# 2.2 传输介质
## 2.2.1 双绞线、同轴电缆、光纤和无线传输介质
### 1. 双绞线
距离太远时，**对于模拟传输，要用放大器；对于数字传输，要用中继器**

### 2. 同轴电缆
- 50欧同轴电缆：用于传输基带数字信号，又称基带同轴电缆，在局域网中应用广泛
- 75欧同轴电缆：用于传输宽带信号，又称宽带同轴电缆，主要用于有线电视系统

### 3. 光纤
利用光脉冲通信，带宽范围大

利用**光的全反射**特性

多模光纤只适合近距离传输；单模光纤适合远距离传输

### 4. 无线传输介质
1. 无线电波：穿透能力强，距离长。WLAN（无线局域网）应用
2. 微博、红外线、激光

## 2.2.2 物理层接口特性
1. 机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等
2. 电气特性：指明接口电缆的各条线上出现**电压的范围**
3. 功能特性：指明某条线上某一电平的**电压表示意义**
4. 过程特性（规程特性）：指明不同功能的各种可能**事件的出现顺序**

常用物理层标准接口：EIA RS-232-C、ADSL、SONET/SDH

# 2.3 物理层设备
## 2.3.1 中继器
1. 主要功能：将信号整形、放大、转发出去，消除信号的失真和衰减
2. **中继器两端的网络部分是网段而不是子网，连接的几个网段依然是一个局域网，不能连接两个不同速率的局域网**
3. 5-4-3规则：采用粗同轴电缆的10BASE5以太网中，互相串联的中继器个数不能超过4个，4个中继器串联的5段通信介质中只有3段能挂计算机，其余两段只能用作扩展的链路段

## 2.3.2 集线器（hub
1. 实质上是多端口的中继器
2. 在网络中只起到信号的放大和转发作用，目的是扩大网络的传输范围
3. **集线器不能分割冲突域**
4. 一个带宽10Mb/s集线器连接8台计算器，则同时工作时，每台计算机真正拥有带宽1.25Mb/s
